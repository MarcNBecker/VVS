<polymer-element name="vvs-dashboard-vorlesung">
	<template>
 		<link rel="stylesheet" href="../../css/elements.css" shim-shadowdom>
		<core-media-query query="max-width: 1400px" queryMatches="{{smallScreen}}"></core-media-query>
		<!-- Main DIV -->
		<paper-shadow z="3" class="shadow">
			<div vertical?="{{smallScreen}}" horizontal?="{{!smallScreen}}" layout>
				<span class="headline vertical-input">{{kurs.kursname}} - {{semester}}. Semester</span>
				<div horizontal layout center class="flex-container">
				<!-- bestehende Vorlesungen -->
					<template repeat="{{item in vorlesungen}}">
						<paper-shadow z="2" class="inner-shadow flex-item">
							<div class="margin">
								<div class="small-headline-dashboard">{{item.vorlesung.fachInstanz.fach.name}}</div>
								<div class="flex-item-item" horizontal layout center>
									<span class="text-width">geplante Stunden:</span>
									<paper-progress class="progress-dashboard" value="{{item.geplanteStunden/item.vorlesung.fachInstanz.stunden}}"></paper-progress>
								</div>
								<div class="flex-item-item" horizontal layout center-center>
									<span class="text-width">Dozent ausgew&auml;hlt:</span>
									<core-icon class="icon-good" icon="check-box" hidden?="{{item.vorlesung.dozent>0}}" flex></core-icon>
									<core-icon class="icon-bad" icon="cancel" hidden?="{{!item.vorlesung.dozent>0}}" flex></core-icon>
								</div>
								<div class="flex-item-item" horizontal layout center-center>
									<span class="text-width">Klausur festgelegt:</span>
									<core-icon class="icon-good" icon="check-box" hidden?="{{!item.geplanteKlausur}}" flex></core-icon>
									<core-icon class="icon-bad" icon="cancel" hidden?="{{item.geplanteKlausur}}" flex></core-icon>
								</div>
							</div>
						</paper-shadow>
					</template>
					<!-- neue Vorlesung -->
					<paper-shadow z="2" class="inner-shadow flex-item">
						<div horizontal layout center-center fit>
							<core-icon class="icon-neutral" icon="add-circle-outline" flex></core-icon>
						</div>
					</paper-shadow>	
				</div>
			</div>
		</paper-shadow>
	</template>
		<script type="text/javascript">
		"use strict";
		Polymer('vvs-dashboard-vorlesung',
			{
				vorlesungen: [],
				kurs: new model.templates.Kurs(),
				semester: 0,
				//Publish those attributes to home
				publish: {
					pageParameter: {},
					pageLoaded: {},
					toasts: {}
				},
				//Initialize the screen
				ready : function() {
					var self = this;
					self.vorlesungen = [];
					//ID is correct, needs to be named like this for other functions
					//TODO Parameter aus Kursdashboard übergeben
					self.kurs = new model.templates.Kurs();
					self.kurs.id = 9;
					self.kurs.kursname = "WWI12SEA";
					self.semester = 3;
					model.webService.getAllVorlesungenSemester(self.kurs, self.semester, function(api) {
						if (!api.isError)
	   					{
	   						self.vorlesungen = api.response;
	   						self.disableToggle = false;
	   					}
	   					else
	   					{
	   						console.log(JSON.stringify(api));
	   						self.toasts.error.show();
	   					}
					}
					);
				},
		});
	</script>
</polymer-element>